{% extends "base.html" %}
{% block content %}
<h2>{{ dish["title"] }}</h2>
{% if dish["image"] %}
    <img src="{{ url_for('static', filename='uploads/' ~ dish["image"]) }}" class="img-fluid" style="max-width:350px;">
{% endif %}
<p><b>Цена:</b> {{ dish["price"] }} руб.</p>
<p>{{ dish["description"] }}</p>
<form method="post" action="{{ url_for('cart') }}">
    <input type="hidden" name="dish_id" value="{{ dish["id"] }}">
    <input type="number" name="qty" min="1" value="1" style="width:60px;">
    <button class="btn btn-success">В корзину</button>
</form>
<h4>Отзывы</h4>
{% for review in reviews %}
<div class="card mb-2">
    <div class="card-body">
        <div>Оценка: {{ review["rating"] }} ★</div>
        <div>{{ review["text"] }}</div>
        <div class="text-muted" style="font-size: 0.9em;">{{ review["name"] }}, {{ review["created_at"] }}</div>
    </div>
</div>
{% endfor %}
{% if session.get("user_id") %}
<form method="post" action="{{ url_for('add_review_route', dish_id=dish["id"]) }}">
    <label>Оценка:</label>
    <select name="rating" class="form-select" style="width:120px;display:inline-block;">
        {% for i in range(1,6) %}
        <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
    </select>
    <label>Отзыв:</label>
    <input type="text" name="text" class="form-control" required>
    <button class="btn btn-primary mt-2">Добавить отзыв</button>
</form>
{% endif %}
{% endblock %}